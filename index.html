<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday Dr. Volker K.</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: #000;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
            color: #fff;
        }

        /* --- Canvas Layering --- */
        .canvas-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        /* Initial State: Only Canvas 1 visible */
        #c1 { opacity: 1; }
        
        /* --- UI Elements --- */
        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(2px);
            transition: opacity 0.8s ease;
            cursor: pointer;
        }

        .enter-btn {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            text-align: center;
            color: #fff;
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            border: 4px solid #fff;
            padding: 20px;
            animation: pulse 2s infinite;
            text-transform: uppercase;
            line-height: 1.2;
        }

        @keyframes pulse {
            0% { transform: scale(1); text-shadow: 0 0 10px #0ff; box-shadow: 0 0 10px #0ff, inset 0 0 10px #0ff; }
            50% { transform: scale(1.05); text-shadow: 0 0 30px #0ff, 0 0 60px #f0f; box-shadow: 0 0 30px #0ff, inset 0 0 30px #0ff; }
            100% { transform: scale(1); text-shadow: 0 0 10px #0ff; box-shadow: 0 0 10px #0ff, inset 0 0 10px #0ff; }
        }

        /* --- Main Content (Hidden initially) --- */
        #main-scroll-container {
            display: none; /* Enabled via JS */
            width: 100%;
            position: relative;
            z-index: 10;
        }

        /* STAR WARS CRAWL STYLE */
        .star-wars-scene {
            height: 150vh; /* Make it long enough to scroll */
            width: 100%;
            perspective: 400px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            padding-top: 10vh;
        }

        .crawl-content {
            width: 90%;
            max-width: 600px;
            text-align: justify;
            font-size: 1.5rem;
            line-height: 1.8;
            font-weight: 700;
            color: #fce702; /* Star Wars Yellow */
            transform-origin: 50% 100%;
            transform: rotateX(25deg) translateY(0);
            text-shadow: 0 0 5px #000;
        }

        .crawl-content h1 {
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        /* --- Footer Section (Illusion) --- */
        .illusion-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding: 20px;
        }

        .illusion-text {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            line-height: 0.9;
            text-align: center;
            color: #fff;
            mix-blend-mode: overlay; /* Cool effect with background */
        }

        .word-time {
            font-size: 25vw; /* Massive */
            display: block;
            width: 100%;
            text-shadow: 4px 4px 0px #ff00de;
        }

        .word-rest {
            font-size: 12vw;
            display: block;
            animation: flicker 0.15s infinite;
            word-break: break-word;
        }

        @keyframes flicker {
            0% { opacity: 1; transform: skewX(0deg); }
            5% { opacity: 0.8; transform: skewX(2deg); }
            10% { opacity: 1; transform: skewX(0deg); }
            50% { opacity: 1; }
            55% { opacity: 0.3; transform: skewX(-5deg); text-shadow: 0 0 20px red; }
            60% { opacity: 1; transform: skewX(0deg); }
            100% { opacity: 1; }
        }

        /* Helper to trigger the illusion background */
        .trigger-zone {
            height: 1px;
            width: 100%;
        }

    </style>
</head>
<body>

    <div class="canvas-wrapper">
        <canvas id="c1"></canvas> <canvas id="c2"></canvas> <canvas id="c3"></canvas> </div>

    <div id="intro-overlay">
        <div class="enter-btn">
            &gt; Geburtstagskind <br> enter the VOID &lt;
        </div>
    </div>

    <div id="main-scroll-container">
        
        <div class="star-wars-scene">
            <div class="crawl-content">
                <h1>Herzlichen Glückwunsch<br>Dr. Volker K.!</h1>
                <p>
                    Während andere Architekten noch mit Bleistift und Papier hantieren, beamt sich VK längst in die Zukunft der KI-gestützten Gebäudeplanung – Captain Kirk hätte ihn sofort als Chief Architect auf die Enterprise geholt! 
                </p>
                <br>
                <p>
                    Seine IFC-Dateien analysiert er mit künstlicher Intelligenz so präzise, dass selbst Data neidisch wäre, und dabei verwandelt er trockene BIM-Daten in lebendige Gebäude-Lebenszyklen. Am BeamLM des KIT sorgt er dafür, dass Bauwerke nicht nur in die Höhe wachsen, sondern intelligent werden – "Beam me up, VK!" könnte das neue Motto der Baubranche werden.
                </p>
                <br>
                <p>
                    Möge dein heutiger Ehrentag genauso innovativ sein wie deine Forschung, und mögen alle deine Algorithmen fehlerfrei kompilieren – auf die nächsten Lichtjahre voller bahnbrechender Architektur-KI!
                </p>
            </div>
        </div>

        <div class="trigger-zone" id="trigger-illusion"></div>
        <div class="illusion-section">
            <div class="illusion-text">
                <span class="word-time">TIME</span>
                <span class="word-rest">IS JUST AN ILLU-<br>SION</span>
            </div>
        </div>
    </div>

    <script>
        // --- AUDIO SETUP ---
        const audio = new Audio('volker.mp3'); 
        audio.loop = true;

        // --- STATE MANAGEMENT ---
        let activeCanvas = 1; // 1 = Intro, 2 = Main, 3 = Footer
        const introOverlay = document.getElementById('intro-overlay');
        const mainContainer = document.getElementById('main-scroll-container');
        const c1 = document.getElementById('c1');
        const c2 = document.getElementById('c2');
        const c3 = document.getElementById('c3');

        // --- INTERACTION ---
        introOverlay.addEventListener('click', () => {
            // Start Audio
            audio.play().catch(e => console.log("Audio play blocked", e));
            
            // UI Transition
            introOverlay.style.opacity = '0';
            setTimeout(() => { introOverlay.style.display = 'none'; }, 800);
            
            // Reveal Content
            mainContainer.style.display = 'block';

            // Background Transition (1 -> 2)
            c1.style.opacity = '0';
            c2.style.opacity = '1';
            activeCanvas = 2;
        });

        // --- SCROLL DETECTION FOR FINAL STAGE ---
        const trigger = document.getElementById('trigger-illusion');
        
        window.addEventListener('scroll', () => {
            if (activeCanvas === 1) return;

            const rect = trigger.getBoundingClientRect();
            // If the trigger zone is near the top of the viewport or above it
            if (rect.top < window.innerHeight / 2) {
                if (activeCanvas !== 3) {
                    c2.style.opacity = '0';
                    c3.style.opacity = '1';
                    activeCanvas = 3;
                }
            } else {
                if (activeCanvas !== 2) {
                    c3.style.opacity = '0';
                    c2.style.opacity = '1';
                    activeCanvas = 2;
                }
            }
        });

        // ==========================================
        // SHADER ENGINE (Optimized for Mobile)
        // ==========================================

        function initWebGL(canvasId, vsSource, fsSource, renderCallback) {
            const canvas = document.getElementById(canvasId);
            const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
            
            if (!gl) return null;

            function createShader(gl, type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    console.error(gl.getShaderInfoLog(shader));
                    gl.deleteShader(shader);
                    return null;
                }
                return shader;
            }

            const program = gl.createProgram();
            gl.attachShader(program, createShader(gl, gl.VERTEX_SHADER, vsSource));
            gl.attachShader(program, createShader(gl, gl.FRAGMENT_SHADER, fsSource));
            gl.linkProgram(program);

            const uRes = gl.getUniformLocation(program, 'iResolution');
            const uTime = gl.getUniformLocation(program, 'iTime');
            
            const buffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,1, 1,1, -1,-1, 1,-1]), gl.STATIC_DRAW);
            
            const aPos = gl.getAttribLocation(program, 'aVertexPosition');
            gl.enableVertexAttribArray(aPos);
            gl.vertexAttribPointer(aPos, 2, gl.FLOAT, false, 0, 0);

            // Return render function closure
            return function(time) {
                if (canvas.width !== canvas.clientWidth || canvas.height !== canvas.clientHeight) {
                    canvas.width = canvas.clientWidth;
                    canvas.height = canvas.clientHeight;
                    gl.viewport(0, 0, canvas.width, canvas.height);
                }
                gl.useProgram(program);
                gl.uniform2f(uRes, canvas.width, canvas.height);
                gl.uniform1f(uTime, time * 0.001);
                gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
            };
        }

        // --- SHADER 1 SOURCE (Neon Menger) ---
        const vsCommon = `attribute vec4 aVertexPosition; void main() { gl_Position = aVertexPosition; }`;
        
        const fs1 = `
            precision highp float;
            uniform vec2 iResolution;
            uniform float iTime;
            mat2 rot(float a) { float s=sin(a),c=cos(a); return mat2(c,-s,s,c); }
            float sdBox(vec3 p, vec3 b) { vec3 q=abs(p)-b; return length(max(q,0.0))+min(max(q.x,max(q.y,q.z)),0.0); }
            float map(vec3 p) {
                p = mod(p, 4.0) - 2.0;
                float d = sdBox(p, vec3(1.0));
                float s = 1.0;
                for(int i=0; i<3; i++) {
                    vec3 a = mod(p*s, 2.0)-1.0;
                    s *= 3.0;
                    vec3 r = abs(1.0 - 3.0*abs(a));
                    float c = (min(max(r.x,r.y),min(max(r.y,r.z),max(r.z,r.x)))-1.0)/s;
                    d = max(d,c);
                }
                return d;
            }
            void main() {
                vec2 uv = (gl_FragCoord.xy*2.0-iResolution.xy)/iResolution.y;
                vec3 ro = vec3(0.0,0.0,iTime*2.0);
                vec3 rd = normalize(vec3(uv,1.0));
                rd.xy *= rot(iTime*0.1);
                rd.xz *= rot(sin(iTime*0.2)*0.5);
                float t=0.0, d=0.0, glow=0.0;
                for(int i=0; i<60; i++) {
                    d = map(ro+rd*t);
                    t += d;
                    glow += 0.01/(0.01+abs(d));
                    if(d<0.001 || t>80.0) break;
                }
                vec3 col = vec3(0.0);
                col += vec3(0.2,0.5,1.0)*glow*0.02;
                col += vec3(1.0,0.2,0.5)*glow*0.01*(sin(iTime)+1.0);
                col = mix(col, vec3(0.0), 1.0-exp(-0.05*t));
                gl_FragColor = vec4(col,1.0);
            }
        `;

        // --- SHADER 2 SOURCE (Silky Flux) ---
        const fs2 = `
            precision highp float;
            uniform vec2 iResolution;
            uniform float iTime;
            vec3 palette(float t) {
                return vec3(0.5) + vec3(0.5)*cos(6.28318*(vec3(1.0)*t+vec3(0.263,0.416,0.557)));
            }
            mat2 rot(float a) { float s=sin(a),c=cos(a); return mat2(c,-s,s,c); }
            float map(vec3 p) {
                vec3 q = p;
                q.z = mod(p.z+iTime*2.0, 3.0)-1.5;
                float accumulatedScale = 1.0;
                for(int i=0; i<4; i++) {
                    q = abs(q)-vec3(0.4,0.4,0.3);
                    q.xy *= rot(0.5+iTime*0.1);
                    q.xz *= rot(0.3);
                    float k = 1.2/dot(q,q);
                    q *= k;
                    accumulatedScale *= k;
                }
                return length(q)/accumulatedScale;
            }
            void main() {
                vec2 uv = (gl_FragCoord.xy*2.0-iResolution.xy)/iResolution.y;
                vec3 ro = vec3(0.0,0.0,-2.0);
                vec3 rd = normalize(vec3(uv,1.5));
                rd.xy *= rot(sin(iTime*0.2)*0.1);
                vec3 col = vec3(0.0);
                float t = 0.0;
                for(int i=0; i<50; i++) {
                    vec3 p = ro+rd*t;
                    float d = map(p);
                    float glow = 0.02/(0.02+abs(d));
                    vec3 layerColor = palette(length(p)*0.1+iTime*0.4);
                    col += layerColor*glow*glow;
                    t += max(0.05, abs(d)*0.5);
                    if(t>20.0) break;
                }
                col = col/(1.0+col);
                col = pow(col, vec3(0.4545));
                col *= 1.0-length(uv)*0.3;
                gl_FragColor = vec4(col,1.0);
            }
        `;

        // --- SHADER 3 SOURCE (Infinite Zoom) ---
        const fs3 = `
            precision highp float;
            uniform vec2 iResolution;
            uniform float iTime;
            vec3 palette(float t) {
                return vec3(0.5) + vec3(0.5)*cos(6.28318*(vec3(1.0)*t+vec3(0.263,0.416,0.557)));
            }
            void main() {
                vec2 uv = (gl_FragCoord.xy*2.0-iResolution.xy)/iResolution.y;
                vec2 uv0 = uv;
                vec3 finalColor = vec3(0.0);
                for(float i=0.0; i<4.0; i++) {
                    uv = fract(uv*1.5)-0.5;
                    float d = length(uv)*exp(-length(uv0));
                    vec3 col = palette(length(uv0)+i*0.4+iTime*0.4);
                    d = sin(d*8.0+iTime)/8.0;
                    d = abs(d);
                    d = pow(0.01/d, 1.2);
                    finalColor += col*d;
                }
                gl_FragColor = vec4(finalColor,1.0);
            }
        `;

        // --- INITIALIZATION ---
        const render1 = initWebGL('c1', vsCommon, fs1);
        const render2 = initWebGL('c2', vsCommon, fs2);
        const render3 = initWebGL('c3', vsCommon, fs3);

        // --- GLOBAL RENDER LOOP ---
        function loop(time) {
            // Only render the active shader to save battery
            if (activeCanvas === 1 && render1) render1(time);
            else if (activeCanvas === 2 && render2) render2(time);
            else if (activeCanvas === 3 && render3) render3(time);
            
            requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);

    </script>
</body>
</html>
