<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geburtstag Dr. Volker K.</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            width: 100%;
            height: 100%;
            background: #000;
            font-family: 'Arial', sans-serif;
            color: #fff;
        }
        
        /* Canvas Hintergründe */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            transition: opacity 0.5s ease;
        }
        
        #canvas1 { z-index: 1; opacity: 1; }
        #canvas2 { z-index: 1; opacity: 0; }
        #canvas3 { z-index: 1; opacity: 0; }
        
        /* Startscreen */
        #startscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.3);
            transition: opacity 0.5s ease;
        }
        
        #startscreen.hidden {
            opacity: 0;
            pointer-events: none;
            z-index: -1;
        }
        
        #startscreen h1 {
            font-size: clamp(2rem, 10vw, 5rem);
            font-weight: bold;
            text-align: center;
            padding: 20px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
                         0 0 40px rgba(0, 200, 255, 0.6),
                         0 0 60px rgba(255, 0, 200, 0.4);
            animation: pulse 2s ease-in-out infinite;
            line-height: 1.3;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Scrollcontainer */
        #scrollcontainer {
            position: relative;
            width: 100%;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        #scrollcontainer.visible {
            opacity: 1;
        }
        
        /* Text Sektion */
        #text-section {
            position: relative;
            width: 100%;
            min-height: 300vh;
            padding: 10vh 5%;
        }
        
        #birthday-text {
            font-size: clamp(3rem, 10vw, 5rem);
            font-weight: bold;
            line-height: 1.6;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8),
                         0 0 40px rgba(255, 215, 0, 0.4);
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Finale Section */
        #finale {
            position: relative;
            width: 100%;
            min-height: 200vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        #finale h2 {
            font-size: clamp(3rem, 15vw, 8rem);
            font-weight: 900;
            text-align: center;
            line-height: 1.1;
            word-wrap: break-word;
            hyphens: manual;
            animation: flicker 0.15s infinite;
            text-shadow: 0 0 30px rgba(255, 255, 255, 1),
                         0 0 60px rgba(0, 255, 255, 0.8),
                         0 0 90px rgba(255, 0, 255, 0.6);
            position: sticky;
            top: 50%;
            transform: translateY(-50%);
        }
        
        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                opacity: 1;
                text-shadow: 0 0 30px rgba(255, 255, 255, 1),
                             0 0 60px rgba(0, 255, 255, 0.8),
                             0 0 90px rgba(255, 0, 255, 0.6);
            }
            20%, 24%, 55% {
                opacity: 0.6;
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            }
        }
        
        /* Scrollbar verstecken */
        body::-webkit-scrollbar {
            display: none;
        }
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <!-- WebGL Canvas Backgrounds -->
    <canvas id="canvas1"></canvas>
    <canvas id="canvas2"></canvas>
    <canvas id="canvas3"></canvas>
    
    <!-- Audio -->
    <audio id="audio" loop>
        <source src="volker.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Startscreen -->
    <div id="startscreen">
        <h1>GEBURTSTAGS&shy;KIND<br>ENTER THE<br>VOID<br>-clickme-</h1>
    </div>
    
    <!-- Scroll Container -->
    <div id="scrollcontainer">
        <!-- Text Section -->
        <div id="text-section">
            <div id="birthday-text">
                Herzlichen Glückwunsch zum Geburtstag, Dr. Volker K.!<br><br>
                
                Während andere Architekten noch mit Bleistift und Papier hantieren, beamt sich VK längst in die Zukunft der KI-gestützten Gebäudeplanung – Captain Kirk hätte ihn sofort als Chief Architect auf die Enterprise geholt!<br><br>
                
                Seine IFC-Dateien analysiert er mit künstlicher Intelligenz so präzise, dass selbst Data neidisch wäre, und dabei verwandelt er trockene BIM-Daten in lebendige Gebäude-Lebenszyklen.<br><br>
                
                Am BeamLM des KIT sorgt er dafür, dass Bauwerke nicht nur in die Höhe wachsen, sondern intelligent werden – "Beam me up, VK!" könnte das neue Motto der Baubranche werden.<br><br>
                
                Möge dein heutiger Ehrentag genauso innovativ sein wie deine Forschung, und mögen alle deine Algorithmen fehlerfrei kompilieren – auf die nächsten Lichtjahre voller bahnbrechender Architektur-KI!
            </div>
        </div>
        
        <!-- Finale -->
        <div id="finale">
            <h2>TIME IS JUST AN ILLU&shy;SION</h2>
        </div>
    </div>

    <script>
        // ===== Canvas Size Fix - VOR WebGL Setup =====
        function resizeCanvas(canvas) {
            const dpr = window.devicePixelRatio || 1;
            canvas.width = window.innerWidth * dpr;
            canvas.height = window.innerHeight * dpr;
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';
        }

        // Initialisiere Canvas-Größen SOFORT
        resizeCanvas(document.getElementById('canvas1'));
        resizeCanvas(document.getElementById('canvas2'));
        resizeCanvas(document.getElementById('canvas3'));

        // ===== WebGL Setup Helper =====
        function setupWebGL(canvasId, fragmentShaderSource) {
            const canvas = document.getElementById(canvasId);
            const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
            
            if (!gl) {
                console.error('WebGL not supported');
                return null;
            }

            const vsSource = `
                attribute vec4 aVertexPosition;
                void main() { gl_Position = aVertexPosition; }
            `;

            function createShader(type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    console.error('Shader error:', gl.getShaderInfoLog(shader));
                    return null;
                }
                return shader;
            }

            const program = gl.createProgram();
            gl.attachShader(program, createShader(gl.VERTEX_SHADER, vsSource));
            gl.attachShader(program, createShader(gl.FRAGMENT_SHADER, fragmentShaderSource));
            gl.linkProgram(program);

            if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                console.error('Program link error:', gl.getProgramInfoLog(program));
                return null;
            }

            const uRes = gl.getUniformLocation(program, 'iResolution');
            const uTime = gl.getUniformLocation(program, 'iTime');
            const buffer = gl.createBuffer();
            
            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,1, 1,1, -1,-1, 1,-1]), gl.STATIC_DRAW);
            
            const aPos = gl.getAttribLocation(program, 'aVertexPosition');
            gl.enableVertexAttribArray(aPos);
            gl.vertexAttribPointer(aPos, 2, gl.FLOAT, false, 0, 0);

            return { canvas, gl, program, uRes, uTime };
        }

        // ===== SHADER 1: Neon Menger Sponge =====
        const fs1 = `
            precision highp float;
            uniform vec2 iResolution;
            uniform float iTime;

            mat2 rot(float a) {
                float s = sin(a), c = cos(a);
                return mat2(c, -s, s, c);
            }

            float sdBox(vec3 p, vec3 b) {
                vec3 q = abs(p) - b;
                return length(max(q, 0.0)) + min(max(q.x, max(q.y, q.z)), 0.0);
            }

            float map(vec3 p) {
                p = mod(p, 4.0) - 2.0;
                float d = sdBox(p, vec3(1.0));
                float s = 1.0;
                
                for(int i = 0; i < 3; i++) {
                    vec3 a = mod(p * s, 2.0) - 1.0;
                    s *= 3.0;
                    vec3 r = abs(1.0 - 3.0 * abs(a));
                    float da = max(r.x, r.y);
                    float db = max(r.y, r.z);
                    float dc = max(r.z, r.x);
                    float c = (min(da, min(db, dc)) - 1.0) / s;
                    d = max(d, c);
                }
                return d;
            }

            void mainImage(out vec4 fragColor, in vec2 fragCoord) {
                vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
                
                vec3 ro = vec3(0.0, 0.0, iTime * 2.0);
                vec3 rd = normalize(vec3(uv, 1.0));
                
                rd.xy *= rot(iTime * 0.1);
                rd.xz *= rot(sin(iTime * 0.2) * 0.5);

                float t = 0.0;
                float d = 0.0;
                vec3 p;
                float glow = 0.0;
                
                for(int i = 0; i < 80; i++) {
                    p = ro + rd * t;
                    d = map(p);
                    t += d;
                    glow += 0.01 / (0.01 + abs(d));
                    if(d < 0.001 || t > 100.0) break;
                }

                vec3 col = vec3(0.0);
                
                if(d < 0.001) {
                    vec2 e = vec2(0.001, 0.0);
                    vec3 n = normalize(vec3(
                        map(p + e.xyy) - map(p - e.xyy),
                        map(p + e.yxy) - map(p - e.yxy),
                        map(p + e.yyx) - map(p - e.yyx)
                    ));
                    col = vec3(0.1) + vec3(0.5, 0.7, 1.0) * max(0.0, dot(n, -rd));
                }
                
                col += vec3(0.2, 0.5, 1.0) * glow * 0.02;
                col += vec3(1.0, 0.2, 0.5) * glow * 0.01 * (sin(iTime) + 1.0);
                col = mix(col, vec3(0.0), 1.0 - exp(-0.05 * t));

                fragColor = vec4(col, 1.0);
            }

            void main() {
                mainImage(gl_FragColor, gl_FragCoord.xy);
            }
        `;

        // ===== SHADER 2: Fractal Flux =====
        const fs2 = `
            precision highp float;
            uniform vec2 iResolution;
            uniform float iTime;

            vec3 palette(float t) {
                vec3 a = vec3(0.5, 0.5, 0.5);
                vec3 b = vec3(0.5, 0.5, 0.5);
                vec3 c = vec3(1.0, 1.0, 1.0);
                vec3 d = vec3(0.263, 0.416, 0.557);
                return a + b * cos(6.28318 * (c * t + d));
            }

            mat2 rot(float a) {
                float s = sin(a), c = cos(a);
                return mat2(c, -s, s, c);
            }

            float map(vec3 p) {
                vec3 q = p;
                q.z = mod(p.z + iTime * 2.0, 3.0) - 1.5;
                
                float scale = 2.0;
                float accumulatedScale = 1.0;
                
                for(int i = 0; i < 4; i++) {
                    q = abs(q) - vec3(0.4, 0.4, 0.3); 
                    q.xy *= rot(0.5 + iTime * 0.1); 
                    q.xz *= rot(0.3);
                    float k = 1.2 / dot(q, q);
                    q *= k;
                    accumulatedScale *= k;
                }
                
                return length(q) / accumulatedScale; 
            }

            void mainImage(out vec4 fragColor, in vec2 fragCoord) {
                vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
                
                vec3 ro = vec3(0.0, 0.0, -2.0); 
                vec3 rd = normalize(vec3(uv, 1.5));
                rd.xy *= rot(sin(iTime * 0.2) * 0.1);

                vec3 col = vec3(0.0);
                float t = 0.0;
                
                for(int i = 0; i < 60; i++) {
                    vec3 p = ro + rd * t;
                    float d = map(p); 
                    float glow = 0.02 / (0.02 + abs(d));
                    vec3 layerColor = palette(length(p) * 0.1 + iTime * 0.4);
                    col += layerColor * glow * glow;
                    t += max(0.05, abs(d) * 0.5);
                    if(t > 20.0) break;
                }

                col = col / (1.0 + col);
                col = pow(col, vec3(0.4545));
                col *= 1.0 - length(uv) * 0.3;

                fragColor = vec4(col, 1.0);
            }

            void main() {
                mainImage(gl_FragColor, gl_FragCoord.xy);
            }
        `;

        // ===== SHADER 3: Infinite Fractal Zoom =====
        const fs3 = `
            precision highp float;
            uniform vec2 iResolution;
            uniform float iTime;

            vec3 palette(float t) {
                vec3 a = vec3(0.5, 0.5, 0.5);
                vec3 b = vec3(0.5, 0.5, 0.5);
                vec3 c = vec3(1.0, 1.0, 1.0);
                vec3 d = vec3(0.263, 0.416, 0.557);
                return a + b * cos(6.28318 * (c * t + d));
            }

            mat2 rot(float a) {
                float s = sin(a);
                float c = cos(a);
                return mat2(c, -s, s, c);
            }

            void mainImage(out vec4 fragColor, in vec2 fragCoord) {
                vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
                vec2 uv0 = uv;
                vec3 finalColor = vec3(0.0);

                for (float i = 0.0; i < 4.0; i++) {
                    uv = fract(uv * 1.5) - 0.5;
                    float d = length(uv) * exp(-length(uv0)); 
                    vec3 col = palette(length(uv0) + i * 0.4 + iTime * 0.4);
                    d = sin(d * 8.0 + iTime) / 8.0;
                    d = abs(d);
                    d = pow(0.01 / d, 1.2);
                    finalColor += col * d;
                }

                fragColor = vec4(finalColor, 1.0);
            }

            void main() {
                mainImage(gl_FragColor, gl_FragCoord.xy);
            }
        `;

        // ===== Initialize all WebGL contexts =====
        const ctx1 = setupWebGL('canvas1', fs1);
        const ctx2 = setupWebGL('canvas2', fs2);
        const ctx3 = setupWebGL('canvas3', fs3);

        // ===== Render Function =====
        function renderContext(ctx) {
            if (!ctx) return;
            
            function render(time) {
                const { canvas, gl, program, uRes, uTime } = ctx;
                
                if (canvas.width !== canvas.clientWidth * (window.devicePixelRatio || 1) ||
                    canvas.height !== canvas.clientHeight * (window.devicePixelRatio || 1)) {
                    resizeCanvas(canvas);
                    gl.viewport(0, 0, canvas.width, canvas.height);
                }
                
                gl.useProgram(program);
                gl.uniform2f(uRes, canvas.width, canvas.height);
                gl.uniform1f(uTime, time * 0.001);
                gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
                
                requestAnimationFrame(render);
            }
            requestAnimationFrame(render);
        }

        // Start all render loops
        renderContext(ctx1);
        renderContext(ctx2);
        renderContext(ctx3);

        // ===== Interactivity =====
        const startscreen = document.getElementById('startscreen');
        const scrollcontainer = document.getElementById('scrollcontainer');
        const audio = document.getElementById('audio');
        const canvas1 = document.getElementById('canvas1');
        const canvas2 = document.getElementById('canvas2');
        const canvas3 = document.getElementById('canvas3');
        const textSection = document.getElementById('text-section');

        // Startscreen Click
        startscreen.addEventListener('click', () => {
            // Start audio
            audio.play().catch(e => console.log('Audio autoplay blocked:', e));
            
            // Fade out startscreen
            startscreen.classList.add('hidden');
            
            // Show scroll container
            scrollcontainer.classList.add('visible');
            
            // Switch canvas
            setTimeout(() => {
                canvas1.style.opacity = '0';
                canvas2.style.opacity = '1';
            }, 500);
        });

        // Scroll Detection for Canvas 3
        let canvas3Active = false;
        window.addEventListener('scroll', () => {
            const textSectionBottom = textSection.offsetTop + textSection.offsetHeight;
            const scrollPos = window.scrollY + window.innerHeight;
            
            // Switch to canvas 3 when text section ends
            if (scrollPos > textSectionBottom && !canvas3Active) {
                canvas3Active = true;
                canvas2.style.opacity = '0';
                canvas3.style.opacity = '1';
            }
        });

        // Window Resize Handler
        window.addEventListener('resize', () => {
            resizeCanvas(document.getElementById('canvas1'));
            resizeCanvas(document.getElementById('canvas2'));
            resizeCanvas(document.getElementById('canvas3'));
        });
    </script>
</body>
</html>
